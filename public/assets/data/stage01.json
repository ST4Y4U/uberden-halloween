{
  "id": 1,
  "name": "Stage 1",
  "bakeTimeSec": 4,
  "ui": {
    "arrowToKitchen": { "x": 1184, "y": 648 },
    "arrowToHall":    { "x": 96,   "y": 648 }
  },
  "layout": {
    "hall": {
      "entryX": -200, "entryY": 420,
      "standX":  320, "standY": 420,
      "deliverZone": { "x": 320, "y": 420, "w": 220, "h": 220 }
    },
    "kitchen": {
      "board":    { "x": 700, "y": 520, "r": 170, "snap": 1 },
      "ovenZone": { "x": 1030, "y": 300, "w": 250, "h": 260 },
      "burnZone": { "x": 1030, "y": 640, "w": 260, "h": 120 },
      "timer":    { "x": 1030, "y": 240,
        "frames": ["kitchen_oven_timer_4","kitchen_oven_timer_3","kitchen_oven_timer_2","kitchen_oven_timer_1"]
      },
      "bins": {
        "doughSlot": {
          "x": 1160, "y": 520,
          "mode": "dough",
          "cycleOnTap": true,
          "label": { "x": 1160, "y": 560, "textDough": "DOUGH", "textLattice": "LATTICE", "fontSize": 20, "color": "#6E2B8B" },
          "alternatives": [
            { "key": "kitchen_ingredient_dough",   "mapsTo": "pie_bottom_raw" },
            { "key": "kitchen_ingredient_lattice", "mapsTo": "pie_top_raw"    }
          ]
        },
        "fillings": [
          { "key": "kitchen_ingredient_pumpkin",   "mapsTo": "pie_jam_pumpkin",   "x": 180, "y": 160 },
          { "key": "kitchen_ingredient_raspberry", "mapsTo": "pie_jam_raspberry", "x": 380, "y": 160 },
          { "key": "kitchen_ingredient_blueberry", "mapsTo": "pie_jam_blueberry", "x": 580, "y": 160 },
          { "key": "kitchen_ingredient_strawberry","mapsTo": "pie_jam_strawberry","x": 780, "y": 160 },
          { "key": "kitchen_ingredient_pecan",     "mapsTo": "pie_jam_pecan",     "x": 180, "y": 300 },
          { "key": "kitchen_ingredient_apple",     "mapsTo": "pie_jam_apple",     "x": 380, "y": 300 },
          { "key": "kitchen_ingredient_magic",     "mapsTo": "pie_jam_magic",     "x": 580, "y": 300, "lockedBy": "kitchen_magic_lock" }
        ],
        "toppings": [
          { "key": "pie_ingredient_cherry",      "x": 240, "y": 620 },
          { "key": "pie_ingredient_sprinkle",    "x": 480, "y": 620 },
          { "key": "pie_ingredient_sugarpowder", "x": 720, "y": 620 }
        ]
      },
      "magic": {
        "lock": { "key": "kitchen_magic_lock", "x": 580, "y": 300, "w": 72, "h": 72 },
        "key":  { "key": "kitchen_magic_key",  "x": 1220, "y": 660 }
      }
    }
  },
  "customers": [
    {
      "id": "c1",
      "name": "levin",
      "sprites": {
        "standard": "client_levin_standard",
        "happy": "client_levin_happy",
        "angry": "client_levin_angry"
      },
      "preDialogue": [
        { "who": "client", "text": "안녕? 이제 막 오픈했나보네?", "sprite": "standard" },
        { "who": "player", "text": "네, 맞아요. 근데 아직도 어떻게 하는지 잘 모르겠어요..." },
        { "who": "client", "text": "그럼 내가 특별히 알려줄게! 내가 먹을 파이도 만들 겸~", "sprite": "happy" }
      ],
      "dialogue": [
        {
          "id": "d1",
          "who": "client",
          "text": "우선 가장 첫번째 재료인 호박으로 해줘~ 올라갈 수 있는 건 다 올리고.",
          "sprite": "standard",
          "choices": [
            { "label": "뭐라구요?", "next": "d2" },
            { "label": "네", "next": "end" }
          ]
        },
        {
          "id": "d2",
          "who": "client",
          "text": "호박을 파이 안에 속으로 넣고, 파이 위에 격자 무늬도 올려줘. 토핑은 다 올려주고~",
          "sprite": "standard",
          "choices": [
            { "label": "뭐라구요?", "next": "d3" },
            { "label": "네", "next": "end" }
          ]
        },
        {
          "id": "d2",
          "who": "client",
          "text": "호박 넣고, 격자 무늬, 스프링클, 슈가파우더, 체리 올려줘~",
          "sprite": "standard",
          "choices": [
            { "label": "네", "next": "end" }
          ]
        },
      ],
      "order": {
        "filling": "pie_jam_pumpkin",
        "needsLattice": true,
        "toppings": ["pie_ingredient_sugarpowder","pie_ingredient_cherry","pie_ingredient_sprinkle"]
      },
      "successLine": { "who": "client", "text": "정말 완벽하게 숙지했네~ 파이 맛도 아주 좋아!", "sprite": "happy" },
      "failLine": { "who": "client", "text": "...하는 방법은 알았으니 됐다~", "sprite": "angry" }
    }
  ],
  "nextStage": 2
}
